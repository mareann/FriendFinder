<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>FriendFinder</title>

  <!-- Latest compiled and minified CSS & JS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

  <!-- Font Awesome Glyphicons -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">

  <!-- Chosen -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.5.1/chosen.jquery.min.js"></script>
<style>
  body {
    background-color: lightgoldenrodyellow;
  }
  h2 {
    background-color: yellow;
    padding: 1em;
    border: solid #00a2ff .5em;
  }
  form { 
    font-size: 1em;
    margin: 1em 0; 
  }
  form p {
    padding: .5em 0;
    font-size: 2em;
    color: #00a2ff; //blue
  }
  form#qGender {
    padding-top: 3em;
    padding-left: 1em;
  }
  .submit {
    margin: 2em 0;
  }
  .sheader {
    margin-left:.5em;
  }
  #matchImg {
    width: 75%;
    height: 75%;
  }
</style>z
</head>

<body>

  <div class="container">
    <h2 class="sheader">Friend Finder Survey Questions</h2>
    <hr>
    <form>
      <h3 class="sheader"><strong>About You</strong></h3>
      <div class="col-xs-6">  
        <h4>Name (Required)</h4>
        <input type="text" id="name" class="form-control" required>
        <h4>Link to Photo Image (Required)</h4>
        <input type="text" id="photo" class="form-control" required>
      </div>
  </form>
  <form id="qGender">
    <div class="col-xs-4">
      <label class="radio-inline">
      <input type="radio" name="gender" value=1>Male
    </label>
    <label class="radio-inline">
      <input type="radio" name="gender" value=2>Female
    </label>
   </div>
  </form>

  <div class="col-xs-12">
    <h2>Tell us more about you!</h2>
    <!-- Question 1 -->
    <form id="q1">
      <p>You prefer indoor activities.</p>
      <label class="radio-inline">
        <input type="radio" name="optradio" value=1>No way
      </label>
      <label class="radio-inline">
        <input type="radio" name="optradio" value=2>Slightly disagree
      </label>
      <label class="radio-inline">
        <input type="radio" name="optradio" value=3>Depends
      </label>
      <label class="radio-inline">
        <input type="radio" name="optradio" value=4>Agree
      </label>
      <label class="radio-inline">
        <input type="radio" name="optradio" value=5>For Sure
      </label> 
    </form>
    <hr>
  <!-- Question 2 -->
    <form id="q2">
      <p>Would your friends say you have a sense of humor?</p>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=1>No way
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=2>Slightly disagree
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=3>Depends
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=4>Agree
      </label>
      <label class="radio-inline">
        <input type="radio" name="optradio" value=5>For Sure
      </label> 
    </form>
    <hr>
  <!-- Question 3 -->
    <form id="q3">
      <p>You have a dog or cat or would like to!</p>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=1>No way
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=2>Slightly disagree
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=3>Depends
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=4>Agree
      </label>
      <label class="radio-inline">
        <input type="radio" name="optradio" value=5>For Sure
      </label> 
    </form>
    <hr>
  <!-- Question 4 -->
    <form id="q4">
      <p>You prefer casual dining!</p>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=1>No way
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=2>Slightly disagree
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=3>Depends
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=4>Agree
      </label>
      <label class="radio-inline">
        <input type="radio" name="optradio" value=5>For Sure
      </label> 
    </form>
    <hr>
  <!-- Question 5 -->
    <form id="q5">
      <p>You like to sing especially in the shower!</p>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=1>No way
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=2>Slightly disagree
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=3>Depends
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=4>Agree
      </label>
      <label class="radio-inline">
        <input type="radio" name="optradio" value=5>For Sure
      </label> 
    </form>
    <hr>
  <!-- Question 6 -->
    <form id="q6">
      <p>You work over 50 hours a week!</p>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=1>No way
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=2>Slightly disagree
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=3>Depends
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=4>Agree
      </label>
      <label class="radio-inline">
        <input type="radio" name="optradio" value=5>For Sure
      </label> 
    </form>
    <hr> 
  <!-- Question 7 -->
    <form id="q7">
      <p>You go to the gym or do outdoor exercise twice a week!</p>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=1>No way
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=2>Slightly disagree
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=3>Depends
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=4>Agree
      </label>
      <label class="radio-inline">
        <input type="radio" name="optradio" value=5>For Sure
      </label> 
    </form>
    <hr>
  <!-- Question 8 -->
    <form id="q8">
      <p>You enjoy museums and exploring the city!</p>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=1>No way
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=2>Slightly disagree
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=3>Depends
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=4>Agree
      </label>
      <label class="radio-inline">
        <input type="radio" name="optradio" value=5>For Sure
      </label> 
    </form>
    <hr>
  <!-- Question 9 -->
    <form id="q9">
      <p>Its always takes you a long time to get ready to go out...</p>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=1>No way
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=2>Slightly disagree
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=3>Depends
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=4>Agree
      </label>
      <label class="radio-inline">
        <input type="radio" name="optradio" value=5>For Sure
      </label> 
    </form>
    <hr>
  <!-- Question 10 -->
    <form id="q10">
      <p>You like to watch sports more than anything else!</p>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=1>No way
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=2>Slightly disagree
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=3>Depends
      </label>
      <label class="radio-inline">
        <input  type="radio" name="optradio" value=4>Agree
      </label>
      <label class="radio-inline">
        <input type="radio" name="optradio" value=5>For Sure
      </label> 
    </form> 
    <hr>
  <!-- Submit Button -->
    <button type="submit" class="btn btn-primary submit">Submit</button>
  </div>  <!-- end col-xs-12 -->
 
  <footer class="footer">
      <div class="container col-xs-10">
        <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/mareann/friendfinder.git">GitHub Repo</a></p>
      </div>
    </footer>
  </div> <!-- end container -->

  <!-- Modal -->
  <div id="resultsModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h2 class="modal-title"><strong>Best Match</strong></h2>
        </div>
        <div class="modal-body">
          <h3 id="matchName"></h3>
          <img id="matchImg" src="" alt="">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div> <!-- end resultsModal -->

</body>

</html>
<script type="text/javascript"> 

  $(".submit").on("click", function(event) {
      event.preventDefault();
    // initialize
    var friendsArray = [];
    var  friendData = {
          name: "name",
          photo: "picture",
          gender: 0,
          scores: [0,0,0,0,0,0,0,0,0,0]};
      


    // get radio button user response
    function getResponse(id) 
    {
      var form = document.getElementById(id); 
      for(var i = 0; i < form.optradio.length; i++)    
       {          
        if(form.optradio[i].checked)          
          var selectedValue = form.optradio[i].value;
       }
      return (selectedValue)
    }

    // get radio button gender user response
    function getGender(id) {
      var form = document.getElementById(id); 
      for(var i = 0; i < form.gender.length; i++)    
       {          
        if(form.gender[i].checked)          
          var selectedValue = form.gender[i].value;
       }
      return (selectedValue)
    }
    // Form validation
    function validateForm() {
      var isValid = true;
      friendData.gender = getGender("qGender");
      friendData.name = $("#name").val().trim();
      friendData.photo = $("#photo").val().trim();

      if (friendData.gender == "" || friendData.name == "" || friendData.photo == "")  
        isValid = false;

      for (var f=1;f<11;f++) {
        if ((friendData.scores[f-1]=getResponse("q"+f)) === "")
          isValid = false;
      }
      return(isValid)
    }

      // If all required fields are filled
    if (validateForm() == true)
    {

      friendData.gender = getGender("qGender");
      friendData.name = $("#name").val().trim();
      friendData.photo = $("#photo").val().trim();
      

      for (var f=1;f<11;f++)
       friendData.scores[f-1]=getResponse("q"+f);

      friendsArray.push(friendData);

      //console.log("survey: friendData name "+friendData.name+" photo "+friendData.photo+" gender "+friendData.gender)
     
    // Grab the URL of the website
      var currentURL = window.location.origin;

      $.post(currentURL + "/api/friends", friendData, 
          function(data) {
            console.log("survey: post /api/friends friend data "+data.name);
            // Grab the result from the AJAX post so that the best match's name and photo are displayed.
            //console.log("survey: match is "+data.name," picture "+data.photo);
            $("#matchName").text(data.name);
            $('#matchImg').attr("src", data.photo);

            // Show the modal with the best match
            $("#resultsModal").modal('toggle');

          //});

            // Clear the form when submitting
            $("#name").val("");
            $("#photo").val("");
            //$("#scores").val("");
    
          }); //end post(currentURL + "/api/friends"

       } // end validateForm
      else
      {
        alert("Please fill out all fields before submitting!");
      }
      return false;
  }); // end ".submit").on("click"
/*    
 $.post(currentURL + "/api/clear", function(req, res) {
          console.log("survey: post /api/clear")
        });*/
</script>


